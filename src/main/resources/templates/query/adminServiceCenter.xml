<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.omb.admin.serviceCenter.dao.AdmServiceCenterDao">
	
	<insert id="admServiceInsert" parameterType="admservice">
		INSERT INTO TB_ADMIN_SERVICE_CENTER(as_no, sc_no, a_no, as_title, as_content, as_created_at)
		VALUES(tb_admin_service_center_seq.nextval,#{sc_no}, 5 ,#{as_title}, #{as_content}, sysdate)
	</insert>
	
	
	<select id="admReplyList" resultType="admservice">
		SELECT A.AS_NO, A.AS_TITLE, A.A_NO, A.SC_NO, B.A_NAME,
        TO_CHAR(A.AS_CREATED_AT, 'YYYY-MM-DD') AS AS_CREATED_AT
        FROM TB_ADMIN_SERVICE_CENTER A
        RIGHT JOIN TB_ADMIN B
        ON A.A_NO = B.A_NO
        WHERE AS_DELETED_AT IS NOT NULL
	</select>
	 
	<select id="replyServiceDetail" parameterType="admservice" resultType="admservice">
		SELECT A.AS_NO, A.AS_TITLE, B.A_NAME, A.AS_CONTENT,
        TO_CHAR(A.AS_CREATED_AT, 'YYYY-MM-DD') AS AS_CREATED_AT
        FROM TB_ADMIN_SERVICE_CENTER A
        RIGHT JOIN TB_ADMIN B
        ON A.A_NO = B.A_NO
        WHERE A.AS_NO = #{as_no}
	</select>
	
	<update id="admReplyUpdate" parameterType="admservice">
		UPDATE tb_admin_service_center
		SET as_content = #{as_content},
			as_created_at = sysdate 
		WHERE as_no = #{as_no}
	</update>
	
	<delete id="admServiceCenterDelete" parameterType="admservice">
		DELETE FROM tb_admin_service_center WHERE as_no = #{as_no}
	</delete>
</mapper>